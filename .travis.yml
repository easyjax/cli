# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: fur23CIN3wNGPSPP+H6dnf0+5H0NFLLqakqKwpVZQXnrzjC+kOBhmIMkoYJqhv4LHjjJq1NMYiWDRfST7BDd+X5PIY8vhofQbrXergt4P8NtiErZyXmdDxfYEilNA0N7WWnkTefEVBmFI8fVIyEuB6aSNwLAoaiscbzPn1vJHCGoV/ZQRvd03U56JWEzcI9mhT7ESNacBuqriQzlZNl23bkzys3HBwf8mqSCu2KUpEJUk/6BW6tnXmRCB4aokRcGJ8rJ5Ni+V8A4QD8j8s2cbipR/8w5CvwdfkshJfXp3Op+1ciXBzMfAYbgIT9UgIPLDQ7BCyIWZS2tDU+LgwtWal//lQ3/kIxfZGvb9peaK7vfpNvZbSDBW1heVeX2cf10owwfv1uESlOXGsGn+8xZWP1G1PyIB8u/UZwLuc1RMpmCsGXS846H7fe5xa2PGgIDqCvLoWhJTEiqDzSb/S3TOFKSv3h2LaSPEJtHTa53/HGftjXqtqq2l5LYqjjiiTy3DYF66LrY1NKQ+Y1NrNr6R8coQnXriNoHcHH3pBDFAoJmZjav6upNH7OSe8mRKgZD3x4kjQ87THD+2lSVaObt4N5T5BbVSKdt8D4yNiHG9RH5LBdoBYfSI6x5L5nblc9+FmN4dzEOe0u0e0j6GzJY3vxIcEWISVF3tiazGiqx878=
  - secure: Cb1cUAMPOeNh8PsEboh7556agOxWWBarZuZT0IojAe2f/C4yTfasEUOFpmjAZwwsYmZlincemmFWegRiafPGJGIMIQ/Hd57IGYw+dXosGaILNf/u+vkVdsr7A9VjXWrTy+fdxWPXFrj4AcxDWPjCIWpUrIycDx7oaEeUwolNVXbtDgHZZY/NPojLlgvuiCAotGtD791wUNaXEVdRFRhNxxStZRW8OwlFOTd25FbfLO0rHF/6WflIBHU2kqlIu7/kuLVjjbaW3zd+o9oOC/bMI2lu4McNvCDi2l6deKrMhHkAlFFjAjoM7ps48U4mUYt9QnMgd8vBj5LSpCDhnwe9Ntmv6as1PIwWd8NOfINx5hwtQ5LkDDHPXW9uWJMrOq1UjBtIoOXbHMR8GAgLAZrNqOFPLg5qb90cHr7WhURg2ufShq/1/t/aWx6NmWFebQA3sqmtPShLhRLQNaqt5al+FFj8asSNw/QptIA5D6d7eTMYt80duNC3FhnFgUV98VCYj7kauWh+W2vmzlHthhCLeSqu6Wx2HRhuKFuq3xgFZ8pmyJDc9WV6Mm6dQiFgarI4jCNxI+dLfYFzc522g9XVIoMHLNxERuDFF7sNbEmI8RzIXoksSr+LcRzxqMem364j1XxuQf0hdWXMJA9g6PkKH6cOsRH4rsL7euiwgrko15s=
  - secure: hu9zfel3L4KI+pznDtpBmnjbix+Js8ZrnmfNlBJzXNncZjTqOp1PWFXI0VCK5S+le6VgGWWkv1RZj3ti0rD+jWka2GMrcBthsrQkjWy9oxFdLoF60dP6tr9XclCu5d8d7vxR8hFbEZrqYLJxfGimKY4IPTc34sUIMlm6mFsiENMpwQOwB8hWTvnQ3jCqpRXLSgYXBOSJMb+EJY218KnyjD+FXgXZptC3l12Ml1w29ltrQJmfsV645yIfKjrRGzobW4/OHxZS2QSb+nOTeyJskFeklAoYmavKkTlwgWMreMJHVVVKDlrDoNC0HY8rLxFznz47ek80Xz4p8pYGkl8S7A7w5ZHkEBk/Xv1tLI1wsGYDAZa2hgZDXlQg4aGodb9ADLCGJXRncdGqFcYzOrLzdNVgsuLZdqzfIjNPI2B6Z30CkYVUrLuMe9BSbGzHMf5DECFh9AHhxQ+dNw2uTdN16/IV26hf4pOWJ31un1SVHuceY1DSf03Ac7gaM5/DAFSp8upgK2b4rNgIeodUbUwcyhAvpM1kof6fvhiKpfnmnmJELCWJCkuHFRddbIOZ7Gis75RWfNAESO20I50ffMG1r92S6MGDG8wZF+HABfVW0BYD6tQUjv64JhFmGZ0NhKvf+gkIqMa3jCR6mvOU9h7qU+n0fROlmHKM66xwG0GzXVc=
  - secure: rZT4Ofiv2HFoPx4zx+BTjX5fMALR93zXPSNEAHeivgr8azIdYJik/FnRX4kITA4DyrWA/2qtBul057HBFwmar0Tv5kXh+7psxDEONFm1P1eR5JaT0FRBnXpueU9nTp06RYsstmZadDvmy8POXBcVc4CR7tLBKzF6VEuqrti7B9rXZ74+mwVL0lqnzCThDEQYUFIy/C/8AHTquy8yTgH90AKJZGnEFB2fK/D9FDvFycsrW8r+ewe/Kn72Z52sfGi5JFaoiDPVpyyBEgkbTVrF7b2vHWVK3hE5TP5yHXc1KbwlfD0MGVFM1v/68D+gWxEkqBNHg9Xd4f4bsoxciiKrwB8KTO5eotyZiMoC1fdkHdnKAYqcSgl0/AYdbCu50DfiwFEz4ixmuIUWPswg5hZyYCzG2c3ksk6XNBuW0hDBOhgdbLu2lFEomI2jdWSGwx10ju4wrHcw7fnwxL6kwvfHucG3bUm0JdzTiwVipSodM4AzBy08L0EDVECi5GisS+fxAuPnL6kCd1+wAQqkzppH84/E9NiIpHgVPcki1jawdXEcBMBc/CePGeNDevPipr+FyXQUR0aVPPfZqoeYIUMsLbrrlW3UH3SUuJe1Ak60NE9rlDczuDeVgXb1s+2r/uV09i+my0KAw9SC7ngb0OI/PcCa6grRiqeKndXojpnyjh8=
  - secure: Mvfu/UUXSEpSpc3pHL24K29582L3FpD5n+CN/N+3NYyNmOc+gFoU/0jhQ2qXjvh9qs6lnCsIKhAyWHgVOwdw84564Kicq15pPNmprI3OGIryE8Axi08su+xaYvqh8a1SjA64upf66O1wYjY5/TfzpkM92/hDTe8Tt/bdjFlYO8e3UrD/3fcWQqFXP88NJb8MyGRAfRM2ZDO+2ezepmpp8BbvMoWzQxSqBIX98zFACm9mPutzi4ZUy2OcOBVx1pZTNhSz2zo93rfkh8X1HneOVhtAVpon31Gwk5Krm59fuD6tMSOH/PyrBgbFaSpcX+azlgnZvvhmFlEJx/Kjh/d1LQ7Yp75VF6UzPQpyWyRwCx/+MD+6jHOTV4pnXN4lndZVOcCWFWrbzHSW+MpikUW/9zc5Oe96+JmCimFTnbI98LG3fdNtmOD9pboFN/tyn20xHebJbbZGTEWm+8xlMaXP6pdkN9D7GZcZShrnKPy/PaUmXWfk6F8eNHsmDLyRaio6RlZXB8pWMMiS+63qiQJWQD/M2FmprMvnSRDD0TPI/CGySE14xF/zy5JqxrAGJbRH61T9rPrMRHk3VXAnPiQFMTecmk7AnKmIavG6GP5bsSOvwUTIEhnZRmMma98dExjjBLrU1krGiy5+yldB4ditf+35yZLEeAFxa0WYukcmbao=
  - secure: FFsZJx+fJcQ8yGOYI89PNOWBg9AkqRCfIqFvcFRiHjvluX8cI3N4ag41GapyEqU+T9ah/8isyZxf9Hc22pS6esKZyYC8VNUM0kQq9oY9/TSdT+R6GflwWlyox1qErAwNwkDgZbo5/0ktR/ipnIasZbXyqatDMaCGzYEuzjH/6oLicNCwvo/utxknO0D4a93M9o5UNZ71uHyVyrS/e6/P51hFY9Msn/3nSXN2TAE+apNB5FrTxiUKtgaY13PNCxoFfqFDicrniYfwZi0x+U+swygTVBSN73/3f13CKWKW9n/kWqZcP7Gos0yDKV+9oeruVgHoFHm1LSWnD+cj/kR66bHbJTNUeUn/THDE52YdvZlrntC8Sc8oBGfWYQn/Uzc3Ym6tAuKtkS8ay5RHiH11/7jICq1CTcEzhv77f7Je0HMDSiz4ptTR/eE9WtxSxlFb6UYmXRRUWOwp1QOJPLNuF4OqMdWIE2Hn0Dw11TLex8om2D3gDjg3vAoqipHUnBWL5OGMkQB2o+P52JfSYTUCddoQY3hANYJLLSuXapgTDxK2Abd+qItZ9Qa4AT2fI3GWInBinrRVpZy9gflWZziEaMVo+k5dWsTJ0KiXfHUAvYldoCqygi1XtXlDeeXWLh0Rn0b723D09mV6iOMJTkHSM3mhP/a3UcnSUVvfy+hX4k0=
  - secure: TPD5vsvtTk5Y8bUwiAPmfSjlIzzzXpP6AqfFodP20HqIECh8xvOnY3smCVjM7P8mbdwgyoDOuGB8fH6o0iXOnZkwCYapfkQPPSpa3xgQ0mK1LDVyXATBfFLtWH5MhVJKTSeRE0nfgKW8O/8UC6XbNOuuiSkb28C9E+qETxxldUP2NOBuL8aGXmw+nc1JLG0SPikGft5EvZG8vLxIhtQEDdOeRkHuaqE5Fkx89/H/RHrOOKa+5VaM3jICuN7Jyh721eIQ7i3T3QBVRjzCPAOLDjnPSX++lu3x6aGUwY+J881QQMrvXaXPBAf0+krMs4WoCHm0gFO05rF6Wc+B2eO0e4iS+G2fOsrCBanUxNr/v5oxpbDbd4n7xcxDjdOYOxaeXP1HCsl9xOzHCY3wzhcrIz/7hBJXnLj15WAkg9OYFXurC7SZvFsRmC1AeT+cIDTTiC8IRjHSsr6EBi+RAw1bMRKcpAx3slqUrUMtHfEq/0I4NL2rKfCyjuUykQx3VHTAZY97RFORvnDh+UDifDnFFB1LWSGkk6zM/u/oIJhwkjU2m9AIC3j4kpr4fTwXL6oJR5DWC4QT6QRFtClGd3Vcm6Im0rFayoDkip4rRvup0d02xDwJFn5tR+zg+4oIXnFkzva0ee8gJag8OvD6Qh0a9mxdyk4oU8OFAIlwMuTeDzs=
